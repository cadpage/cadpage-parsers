package net.anei.cadpage.parsers.OR;

import java.util.Properties;
import java.util.regex.Pattern;

import net.anei.cadpage.parsers.dispatch.DispatchA22Parser;

/*
 * Klamath County, OR
 */

public class ORKlamathCountyParser extends DispatchA22Parser {

  public ORKlamathCountyParser() {
    super(CITY_CODES, "KLAMATH COUNTY", "OR");
    setupGpsLookupTable(GPS_LOOKUP_TABLE);
  }

  @Override
  public String getFilter() {
    return "kc-911@kc911.us,paging@klamath911.gov";
  }

  @Override
  public int getMapFlags() {
    return MAP_FLG_SUPPR_LA;
  }

  @Override
  protected String adjustGpsLookupAddress(String addr) {
    addr = TRAIL_DIR_PTN.matcher(addr).replaceFirst("");
    addr = MPNN_PTN.matcher(addr).replaceAll("MP $1 ");
    return addr;
  }

  private static final Pattern TRAIL_DIR_PTN = Pattern.compile(" +[NSEW]{1,2}$");
  private static final Pattern MPNN_PTN = Pattern.compile("MP(\\d+) ");

  private static final Properties GPS_LOOKUP_TABLE = buildCodeTable(new String[]{
      "0 MIDLAND REST AREA",                  "+42.125528,-121.825015",

      "MP 1 HWY 39",                          "+42.181328,-121.698156",
      "MP 1 HWY 39",                          "+42.181380,-121.698026",
      "MP 2 HWY 39",                          "+42.166710,-121.698096",
      "MP 3 HWY 39",                          "+42.152224,-121.698251",
      "MP 4 HWY 39",                          "+42.137419,-121.698231",
      "MP 5 HWY 39",                          "+42.123819,-121.697442",
      "MP 6 HWY 39",                          "+42.108684,-121.698447",
      "MP 7 HWY 39",                          "+42.095614,-121.690759",
      "MP 8 HWY 39",                          "+42.084258,-121.680727",
      "MP 9 HWY 39",                          "+42.072508,-121.668365",
      "MP 10 HWY 39",                         "+42.062438,-121.654515",
      "MP 11 HWY 39",                         "+42.052373,-121.640346",
      "MP 12 HWY 39",                         "+42.042466,-121.626376",

      "MP 258 HWY 97",                        "+42.441334,-121.867645",
      "MP 259 HWY 97",                        "+42.430125,-121.856462",
      "MP 260 HWY 97",                        "+42.419029,-121.843597",
      "MP 261 HWY 97",                        "+42.407993,-121.831436",
      "MP 262 HWY 97",                        "+42.396006,-121.820966",
      "MP 263 HWY 97",                        "+42.382828,-121.813278",
      "MP 264 HWY 97",                        "+42.368905,-121.818809",
      "MP 265 HWY 97",                        "+42.355052,-121.824732",
      "MP 266 HWY 97",                        "+42.341250,-121.826866",
      "MP 267 HWY 97",                        "+42.328514,-121.817825",
      "MP 268 HWY 97",                        "+42.314230,-121.817426",
      "MP 269 HWY 97",                        "+42.299760,-121.817220",
      "MP 270 HWY 97",                        "+42.285479,-121.814566",
      "MP 271 HWY 97",                        "+42.271019,-121.810730",
      "MP 272 HWY 97",                        "+42.259055,-121.803210",
      "MP 273 HWY 97",                        "+42.246794,-121.795106",
      "MP 274 HWY 97",                        "+42.232620,-121.795596",
      "MP 275 HWY 97",                        "+42.219196,-121.789902",
      "MP 276 HWY 97",                        "+42.205635,-121.788958",
      "MP 277 HWY 97",                        "+42.192779,-121.798025",
      "MP 278 HWY 97",                        "+42.179055,-121.800690",
      "MP 279 HWY 97",                        "+42.164869,-121.798318",
      "MP 280 HWY 97",                        "+42.151012,-121.802471",
      "MP 280 WHY 97",                        "+42.154828,-121.799787",
      "MP 281 HWY 97",                        "+42.139421,-121.814183",
      "MP 282 HWY 97",                        "+42.127480,-121.825142",
      "MP 283 HWY 97",                        "+42.113711,-121.831394",
      "MP 284 HWY 97",                        "+42.099743,-121.837189",
      "MP 285 HWY 97",                        "+42.086061,-121.842773",
      "MP 286 HWY 97",                        "+42.072182,-121.848373",
      "MP 287 HWY 97",                        "+42.058636,-121.855705",
      "MP 288 HWY 97",                        "+42.052180,-121.860975",

      "MP 1 HWY 140 W",                       "+42.189724,-121.811147",
      "MP 1 HWY 140 E",                       "+42.181550,-121.766929",
      "MP 2 HWY 140 E",                       "+42.188155,-121.766929",
      "MP 3 HWY 140 E",                       "+42.174883,-121.756797",
      "MP 4 HWY 140 E",                       "+42.173678,-121.735110",
      "MP 5 HWY 140 E",                       "+42.173345,-121.715397",
      "MP 6 HWY 140",                         "+42.195795,-121.695704",
      "MP 7 HWY 140",                         "+42.192495,-121.677067",
      "MP 8 HWY 140",                         "+42.185970,-121.660004",
      "MP 9 HWY 140",                         "+42.178024,-121.643411",
      "MP 10 HWY 140",                        "+42.171421,-121.626500",
      "MP 11 HWY 140",                        "+42.177411,-121.609380",
      "MP 12 HWY 140",                        "+42.188212,-121.598190",
      "MP 13 HWY 140",                        "+42.199590,-121.603057",
      "MP 14 HWY 140",                        "+42.214001,-121.600708",
      "MP 15 HWY 140",                        "+42.228095,-121.598947",
      "MP 16 HWY 140",                        "+42.234278,-121.583726",
      "MP 17 HWY 140",                        "+42.234873,-121.563923",
      "MP 18 HWY 140",                        "+42.234985,-121.544392",
      "MP 19 HWY 140",                        "+42.232929,-121.526146",
      "MP 32 HWY 140",                        "+42.395990,-122.293210",
      "MP 33 HWY 140",                        "+42.392960,-122.273920",
      "MP 34 HWY 140",                        "+42.389720,-122.255080",
      "MP 35 HWY 140",                        "+42.384440,-122.237920",
      "MP 36 HWY 140",                        "+42.392120,-122.222490",
      "MP 37 HWY 140",                        "+42.395920,-122.204250",
      "MP 38 HWY 140",                        "+42.400360,-122.186680",
      "MP 39 HWY 140",                        "+42.411230,-122.176060",
      "MP 40 HWY 140",                        "+42.425700,-122.173860",
      "MP 41 HWY 140",                        "+42.431890,-122.158870",
      "MP 42 HWY 140",                        "+42.434190,-122.139880",
      "MP 43 HWY 140",                        "+42.437200,-122.120150",
      "MP 44 HWY 140",                        "+42.449410,-122.112050",
      "MP 45 HWY 140",                        "+42.442950,-122.096410",
      "MP 46 HWY 140",                        "+42.433090,-122.082370",
      "MP 47 HWY 140",                        "+42.422835,-122.070721",
      "MP 48 HWY 140",                        "+42.411596,-122.058337",
      "MP 49 HWY 140",                        "+42.401994,-122.044001",
      "MP 50 HWY 140",                        "+42.393237,-122.028431",
      "MP 51 HWY 140",                        "+42.384478,-122.012941",
      "MP 52 HWY 140",                        "+42.375301,-121.998027",
      "MP 53 HWY 140",                        "+42.361737,-121.993409",
      "MP 54 HWY 140",                        "+42.350873,-121.980597",
      "MP 55 HWY 140",                        "+42.340643,-121.966830",
      "MP 56 HWY 140",                        "+42.329015,-121.955315",
      "MP 57 HWY 140",                        "+42.318676,-121.942712",
      "MP 58 HWY 140",                        "+42.305227,-121.937161",
      "MP 59 HWY 140",                        "+42.292419,-121.928795",
      "MP 60 HWY 140",                        "+42.281811,-121.915801",
      "MP 61 HWY 140",                        "+42.275343,-121.899521",
      "MP 62 HWY 140",                        "+42.270611,-121.881508",
      "MP 63 HWY 140",                        "+42.257687,-121.872968",
      "MP 64 HWY 140",                        "+42.245571,-121.862205",
      "MP 65 HWY 140",                        "+42.233475,-121.851486",
      "MP 66 HWY 140",                        "+42.221351,-121.840838",
      "MP 67 HWY 140",                        "+42.211432,-121.826993",
      "MP 68 HWY 140",                        "+42.202770,-121.811473"
  });

  private static Properties CITY_CODES = buildCodeTable(new String[]{
      "KF", "KLAMATH FALLS"
  });
}
